<!doctype html>



<html>
	<head>
		<div>
			<title>Car Loan Calculator</title>
			<link href="main.css" rel="stylesheet" type="text/css"/>
		</div>
		
		
		<script>
			function isValid(evt, boo)
			{
				var pr = "false";
				var ch = String.fromCharCode(evt.which);
				
				
				
				if (boo == 1)
				{
					if (!(/[0-9]/.test(ch) || /[.]/.test(ch)))
					{
						evt.preventDefault();
					}
					else if (/[.]/.test(ch))
					{
						if (pr==false && /[.]/.test(ch))
						{
							pr = true;
						}
						else if (pr==true && /[.]/.test(ch))
						{
							evt.preventDefault();
						}
					}
				}
				else
				{
					if (!(/[0-9]/.test(ch)))
					{
						evt.preventDefault();
					}
				}
			}
			
			
			
			function checkBounds()
			{
				var downPay = document.getElementById('downPay').value;
				var amount = document.getElementById('carCost').value;
				var annRate = document.getElementById('annRate').value;
				var loanTerm = document.getElementById('loanTerm').value;
				
				
				
				if (amount<0 || amount>500000)
				{
					document.write(amount + " is not within range <br/>");
					<!-- document.getElementById('carCost').value = "100000001"; -->
				}
				
				
				if (annRate<0 || annRate>15)
				{
					document.write(downPay + " is within range <br/>");
					<!-- document.getElementById('annRate').value = "100000001"; -->
				}
				
				
				if (loanTerm<1 || loanTerm>6)
				{
					document.write(loanTerm + " is not within range <br/>");
					<!-- document.getElementById('loanTerm').value = "100000001"; -->
				}		
			}
			
			
			
			function fnCalc()
			{
				var cost = document.getElementById('carCost').value;
				var downPay = document.getElementById('downPay').value;
				var annRate = document.getElementById('annRate').value;
				var loanTerm= document.getElementById('loanTerm').value;
				var payment = 0;
				var tmp1 = 0;
				var tmp2 = 0;
				var iRate = 0;
				var payMonths = 0;
				var loanAmt = 0;
				var monthlyPayment = 0;
				
				
				
				cost = parseFloat(cost);
				downPay = parseFloat(downPay);
				annRate = parseFloat(annRate);
				loanTerm = parseFloat(loanTerm);
				checkBounds();
				
				
				iRate = annRate / 12;
				payMonths =  loanTerm * 12;
				loanAmt = cost - downPay;
				
				
				tmp1 = 1 + iRate;
					<!-- document.getElementById('textResult').value = tmp1; -->
					<!-- 1.83333 -->
				tmp1 = Math.pow(tmp1, payMonths);
					<!-- document.getElementById('textResult').value = tmp1; -->
					<!-- 6.16170 -->
				tmp1 = iRate * tmp1;
					<!-- document.getElementById('textResult').value = tmp1; -->
					<!-- 5.13503 -->
				
				
				tmp2 = 1 + iRate;
					<!-- document.getElementById('textResult').value = tmp2; -->
					<!-- 1.83333 -->
				tmp2 = Math.pow(tmp2, payMonths);
					<!-- document.getElementById('textResult').value = tmp2; -->
					<!-- 6.16203 -->
				tmp2 = tmp2 - 1.0;
					<!-- document.getElementById('textResult').value = tmp2; -->
					<!-- 5.16203 -->
				
				
				tmp1 = tmp1 / tmp2;
					<!-- document.getElementById('textResult').value = tmp1; -->
					<!-- 0.99476 -->
				
				
				payment = tmp1 * loanAmt;
					<!-- document.getElementById('textResult').value = payment; -->
					<!-- 6963.37817 -->
				monthlyPayment = payment / payMonths;
					<!-- document.getElementById('textResult').value = tmp1; -->
					<!-- 0.99476 -->
				
				
				document.getElementById('annRate').value = iRate;
				document.getElementById('textResult').value = payment;
				document.getElementById('monthlyPay').value = monthlyPayment;
				document.getElementById('totalPayments').value = payMonths;
			}
			
			
			
			function fnReset()
			{
				document.getElementById('carCost').value = "";
				document.getElementById('downPay').value = "";
				document.getElementById('annRate').value = "";
				document.getElementById('loanTerm').value = "";
				document.getElementById('monthlyPay').value = "";
				document.getElementById('totalPayments').value = "";
				document.getElementById('textResult').value = "";
			}
		</script>
		
	</head>
	
	
	
	<body>
		<div1>
			<h1><strong>CS 326 Javascript Car Loan Calculator</h1></strong>
			<h1>Juan Uscanga</h1>
		</div1>
		
		
		<hr></hr>
		
		
			<fieldset>
				<p><strong>
					<label>Car Cost Amount</label>
					<input type="text"
						id="carCost"
						value=""
						onkeypress="isValid(event, 1)"
					/>
				</p></strong>
				<p><strong>
					<label>Down Payment</label>
					<input type="text"
						id="downPay"
						value=""
						onkeypress="isValid(event, 1)"
					/>
				</p></strong>
				<p><strong>
					<label>Annual Interest Rate</label>
					<input type="text"
						id="annRate"
						value=""
						onkeypress="isValid(event, 1)"
					/>
				</p></strong>
				<p><strong>
					<label>Term (in years: 1-6)</label>
					<input type="text"
						id="loanTerm"
						value=""
						onkeypress="isValid(event, 0)"
					/>
				</p></strong>
				
				<button onclick="fnCalc();" type="button" id="buttonCalculate"><strong>Press to calculate auto loan information</button></strong>
				<br>
				<button onclick="fnReset();" type="button" id="buttonReset"><strong>Reset Form</button></strong>
		
		
			<hr></hr>
		
		
				<p><strong>
					<label>Monthly Payment:</label>
					<input type="text"
						id="monthlyPay"
						value=""
					/>
				</p></strong>
				<p><strong>
					<label>Total Payments:</label>
					<input type="text"
						id="totalPayments"
						value=""
					/>
				</p></strong>
		
		
		
				<h2><strong>Payment Schedule</h2></strong>
				<textarea rows="16" cols="100" id="textResult"></textarea>
			</fieldset>
	</body>
</html>